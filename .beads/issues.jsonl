{"id":"avemu-71h","title":"Migrate avemu to pyavcontrol 2.0 API","description":"Migrate avemu emulator from the legacy pyavcontrol v1.0 API to the new v2.0 API. This includes using ProtocolLibrary, EmulatorClient, and the new YAML-based protocol definitions with 6-layer architecture.\n\n## Scope\n- Replace DeviceModelLibrary with ProtocolLibrary\n- Replace custom DefaultHandler with EmulatorClient \n- Support new protocol ID format (slash-separated: mcintosh/mx160)\n- Update framing/protocol structure access\n- Add stateful emulation capabilities\n- Update CLI and documentation\n\n## Success Criteria\n- All existing supported devices work with new API\n- Emulator correctly responds to commands using new EmulatorClient\n- Tests pass\n- Documentation updated","status":"closed","priority":2,"issue_type":"epic","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:45:27.525957-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:01:12.57044-08:00","closed_at":"2026-01-13T20:01:12.570442-08:00"}
{"id":"avemu-71h.1","title":"Update pyavcontrol dependency to v2.0.0+","description":"Update pyproject.toml and requirements.txt to use pyavcontrol v2.0.0 or later.\n\n## Changes\n- Update pyproject.toml dependency version\n- Update requirements.txt\n- Consider using local development path during migration: `pyavcontrol @ file:///path/to/avcontrol/avcontrol`\n\n## Files to modify\n- pyproject.toml\n- requirements.txt\n\n## Acceptance\n- pyavcontrol \u003e=2.0.0 dependency is properly specified\n- Package can be installed successfully","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:45:48.817615-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:14:26.422085-08:00","closed_at":"2026-01-13T20:14:26.422085-08:00","close_reason":"Completed during pyavcontrol 1.0 migration","labels":["core"],"dependencies":[{"issue_id":"avemu-71h.1","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:45:48.819372-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.10","title":"Add integration tests for emulator","description":"Create integration tests to verify avemu works correctly with pyavcontrol 2.0.\n\n## Test Scenarios\n1. Load protocol via ProtocolLibrary\n2. Create EmulatorClient\n3. Process query commands (e.g., !POWER?)\n4. Process set commands (e.g., !POWER(1))\n5. Verify state updates after set commands\n6. Test multiple protocols (mcintosh, lyngdorf, etc.)\n\n## Test Structure\n```python\n# tests/test_emulator.py\nimport pytest\nfrom pyavcontrol import ProtocolLibrary, EmulatorClient\n\n@pytest.fixture\ndef library():\n    return ProtocolLibrary()\n\n@pytest.fixture  \ndef mcintosh_emulator(library):\n    protocol = library.load('mcintosh/mx160')\n    return EmulatorClient(protocol)\n\ndef test_power_query(mcintosh_emulator):\n    response = mcintosh_emulator.process_command(b'!POWER?\\r')\n    assert b'!POWER' in response\n\ndef test_power_set(mcintosh_emulator):\n    mcintosh_emulator.process_command(b'!POWER(1)\\r')\n    assert mcintosh_emulator.state.get('power') == True\n```\n\n## Files to create\n- tests/test_emulator.py\n- tests/conftest.py (fixtures)\n\n## Acceptance\n- Tests cover core emulation scenarios\n- Tests pass with pyavcontrol 2.0\n- CI/CD can run tests","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:55.359529-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:14:26.425752-08:00","closed_at":"2026-01-13T20:14:26.425752-08:00","close_reason":"Completed during pyavcontrol 1.0 migration","labels":["testing"],"dependencies":[{"issue_id":"avemu-71h.10","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:55.360183-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.10","depends_on_id":"avemu-71h.4","type":"blocks","created_at":"2026-01-13T19:48:16.439194-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.11","title":"Update README documentation","description":"Update README.md to reflect pyavcontrol 2.0 API changes.\n\n## Documentation Updates\n1. Update usage examples with new protocol ID format\n2. Document both underscore and slash formats\n3. Update architecture description\n4. Remove references to DefaultHandler internals\n5. Add examples of stateful emulation\n6. Update version requirements\n\n## Example Updates\n```bash\n# Old format (still supported)\npython avemu.py --model mcintosh_mx160\n\n# New format (preferred)\npython avemu.py --model mcintosh/mx160\n```\n\n## Files to modify\n- README.md\n\n## Acceptance\n- Documentation accurate for pyavcontrol 2.0\n- Examples work as documented\n- Migration notes included for existing users","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:56.391312-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:14:26.427851-08:00","closed_at":"2026-01-13T20:14:26.427851-08:00","close_reason":"Completed during pyavcontrol 1.0 migration","labels":["docs"],"dependencies":[{"issue_id":"avemu-71h.11","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:56.391993-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.11","depends_on_id":"avemu-71h.4","type":"blocks","created_at":"2026-01-13T19:48:18.065734-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.12","title":"End-to-end testing with ha-conductor","description":"Test avemu with the Home Assistant ha-conductor integration to ensure full stack works.","status":"open","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:58.25865-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-02-09T00:08:48.059429-08:00","labels":["testing"],"dependencies":[{"issue_id":"avemu-71h.12","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:58.259456-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.12","depends_on_id":"avemu-71h.10","type":"blocks","created_at":"2026-01-13T19:48:19.626939-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.13","title":"Handle invalid commands via framing.invalid_commands setting","description":"Implement proper handling of invalid/unknown commands based on protocol's framing.invalid_commands setting.\n\n## Framing Configuration\n```yaml\nframing:\n  invalid_commands: ignored | error | echo\n```\n\n- **ignored**: Silently drop unknown commands (no response)\n- **error**: Return error response\n- **echo**: Echo back the command\n\n## Current Behavior\n```python\n# handlers/default.py\nif not action_id:\n    LOG.warning(f'No command found for: {text}')\n    return '***ERROR***'\n```\n\n## New Behavior\n```python\n# EmulatorClient handles this based on protocol.framing.invalid_commands\n# Need to ensure Server class respects this behavior\n```\n\n## Files to verify\n- avemu.py (Server class error handling)\n\n## Acceptance\n- Unknown commands handled per protocol's framing.invalid_commands\n- Error responses match protocol format","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:47:10.729491-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:01:06.476006-08:00","closed_at":"2026-01-13T20:01:06.476008-08:00","dependencies":[{"issue_id":"avemu-71h.13","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:47:10.730191-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.13","depends_on_id":"avemu-71h.4","type":"blocks","created_at":"2026-01-13T19:48:21.075461-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.14","title":"Update version number to 0.1.0","description":"Bump avemu version to 0.1.0 to reflect the major pyavcontrol 2.0 migration.\n\n## Version Strategy\n- Current: 0.0.1 (beta)\n- New: 0.1.0 (significant API migration, still beta)\n\n## Files to Update\n- pyproject.toml (version field)\n- README.md (if version referenced)\n\n## Acceptance\n- Version reflects the significant migration work\n- CHANGELOG or release notes document the migration","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:47:11.810608-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:14:26.429453-08:00","closed_at":"2026-01-13T20:14:26.429453-08:00","close_reason":"Completed during pyavcontrol 1.0 migration","dependencies":[{"issue_id":"avemu-71h.14","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:47:11.811269-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.2","title":"Refactor avemu.py to use new ProtocolLibrary API","description":"Update avemu.py main entry point to use the new pyavcontrol 2.0 API.\n\n## Current Code (v1.0)\n```python\nfrom pyavcontrol import DeviceModelLibrary\nlibrary = DeviceModelLibrary.create()\nmodel = library.load_model(args.model)\nprotocol = model.definition['protocol']\n```\n\n## New Code (v2.0)\n```python\nfrom pyavcontrol import ProtocolLibrary, EmulatorClient\nlibrary = ProtocolLibrary()\nprotocol = library.load('mcintosh/mx160')  # slash-separated ID\nemulator = EmulatorClient(protocol)\n```\n\n## Changes Required\n- Replace DeviceModelLibrary.create() with ProtocolLibrary()\n- Replace load_model() with load()\n- Support both underscore (mcintosh_mx160) and slash (mcintosh/mx160) formats for backward compatibility\n- Update list_protocols() usage for --supported flag\n- Access framing settings via protocol.framing instead of model.definition['protocol']\n\n## Files to modify\n- avemu.py\n\n## Acceptance\n- ProtocolLibrary loads protocols correctly\n- Protocol ID format conversion works\n- --supported flag lists protocols correctly","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:45:50.402493-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:01:06.418485-08:00","closed_at":"2026-01-13T20:01:06.418497-08:00","labels":["core"],"dependencies":[{"issue_id":"avemu-71h.2","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:45:50.403316-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.2","depends_on_id":"avemu-71h.1","type":"blocks","created_at":"2026-01-13T19:47:57.63229-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.3","title":"Replace DefaultHandler with EmulatorClient","description":"Replace the custom DefaultHandler implementation with the new EmulatorClient from pyavcontrol 2.0.\n\n## Current Architecture\n```\navemu.py -\u003e DefaultHandler -\u003e _build_canned_responses() -\u003e regex patterns\n```\n\nThe DefaultHandler manually:\n- Builds command registries from api.{group}.actions.{action}\n- Stores regex patterns and canned responses\n- Returns static responses from test cases\n\n## New Architecture\n```\navemu.py -\u003e EmulatorClient.process_command(raw_bytes) -\u003e response_bytes\n```\n\nEmulatorClient provides:\n- Automatic command identification from protocol definitions\n- State tracking via DeviceState\n- Dynamic response generation via ResponseParser\n- Proper handling of set commands vs query commands\n\n## Migration Steps\n1. Remove DefaultHandler instantiation\n2. Create EmulatorClient(protocol) after loading protocol\n3. Replace handler.handle_command(text) with emulator.process_command(bytes)\n4. Handle encoding conversion (text \u003c-\u003e bytes)\n5. Remove handlers/default.py after migration complete\n\n## Files to modify\n- avemu.py\n- handlers/default.py (delete after migration)\n- handlers/__init__.py (may simplify or keep EmulatorHandler base for future)\n\n## Acceptance\n- Commands are processed via EmulatorClient\n- Responses match expected format\n- Stateful commands work correctly","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:45:51.638592-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:01:06.42987-08:00","closed_at":"2026-01-13T20:01:06.429873-08:00","labels":["core"],"dependencies":[{"issue_id":"avemu-71h.3","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:45:51.639436-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.3","depends_on_id":"avemu-71h.2","type":"blocks","created_at":"2026-01-13T19:47:58.978551-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.4","title":"Update Server class for EmulatorClient integration","description":"Update the Server class in avemu.py to work with EmulatorClient instead of text-based handler.\n\n## Current Server.run() Flow\n```python\nprotocol = self._model.definition['protocol']\ncmd_separator = protocol.get('command_separator', '\\n')\ncmd_eol = protocol.get('command_eol', '')\nmsg_eol = protocol.get('message_eol', '')\n\n# Text-based processing\ndecoded_data = data.decode(self._handler.encoding)\nrequests = decoded_data.split(cmd_eol)\nresponse = self._handler.handle_command(req)  # text in, text out\n```\n\n## New Flow with EmulatorClient\n```python\n# Access framing from ProtocolDefinition\nframing = self._protocol.framing\nsuffix = framing.suffix if framing else '\\r'\n\n# Bytes-based processing\nresponse = self._emulator.process_command(data)  # bytes in, bytes out\nself._socket.send(response)\n```\n\n## Key Changes\n1. Replace model.definition['protocol'] access with protocol.framing\n2. Remove text encoding/decoding layer (EmulatorClient handles it)\n3. Pass EmulatorClient to Server instead of handler + model\n4. Handle framing.suffix, framing.prefix, framing.case_sensitive\n\n## Files to modify\n- avemu.py\n\n## Acceptance\n- Server correctly processes raw bytes through EmulatorClient\n- Framing (prefix/suffix) handled correctly\n- Multiple concurrent clients still supported","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:12.19729-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:01:06.439563-08:00","closed_at":"2026-01-13T20:01:06.439566-08:00","labels":["core"],"dependencies":[{"issue_id":"avemu-71h.4","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:12.198238-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.4","depends_on_id":"avemu-71h.3","type":"blocks","created_at":"2026-01-13T19:48:00.065689-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.5","title":"Add protocol ID format backward compatibility","description":"Support both underscore (mcintosh_mx160) and slash (mcintosh/mx160) protocol ID formats for backward compatibility.\n\n## Current CLI Usage\n```bash\npython avemu.py --model mcintosh_mx160\n```\n\n## New pyavcontrol Format\n```\nmcintosh/mx160  # slash-separated\n```\n\n## Implementation\n```python\ndef normalize_protocol_id(model_arg: str) -\u003e str:\n    '''Convert underscore format to slash format for ProtocolLibrary.'''\n    return model_arg.replace('_', '/')\n\n# In main():\nprotocol_id = normalize_protocol_id(args.model)\nprotocol = library.load(protocol_id)\n```\n\n## Acceptance\n- Both --model mcintosh_mx160 and --model mcintosh/mx160 work\n- Error messages show the user-provided format\n- --supported shows both formats for discoverability","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:13.748983-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:01:06.449207-08:00","closed_at":"2026-01-13T20:01:06.44921-08:00","dependencies":[{"issue_id":"avemu-71h.5","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:13.749684-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.5","depends_on_id":"avemu-71h.2","type":"blocks","created_at":"2026-01-13T19:48:01.470164-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.6","title":"Update --supported flag for new API","description":"Update the --supported flag to work with the new ProtocolLibrary API.\n\n## Current Code\n```python\nlibrary = DeviceModelLibrary.create()\nif args.supported:\n    print(format_data_into_columns(sorted(list(library.supported_models()))))\n```\n\n## New Code\n```python\nlibrary = ProtocolLibrary()\nif args.supported:\n    protocols = library.list_protocols()  # returns ['mcintosh/mx160', ...]\n    # show both formats for user convenience\n    display_list = []\n    for p in protocols:\n        display_list.append(p)\n        display_list.append(p.replace('/', '_'))  # also show underscore format\n    print(format_data_into_columns(sorted(set(display_list))))\n```\n\n## Files to modify\n- avemu.py\n\n## Acceptance\n- --supported lists all available protocols\n- Both slash and underscore formats shown\n- Output is properly formatted in columns","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:14.869638-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:01:06.457783-08:00","closed_at":"2026-01-13T20:01:06.457785-08:00","dependencies":[{"issue_id":"avemu-71h.6","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:14.870318-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.6","depends_on_id":"avemu-71h.2","type":"blocks","created_at":"2026-01-13T19:48:02.59493-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.7","title":"Access connection settings from new ProtocolDefinition","description":"Update port defaulting logic to use new ProtocolDefinition.connection structure.\n\n## Current Code\n```python\nif device_default_port := model.definition['connection'].get('ip', {}).get('port'):\n    port = device_default_port\n```\n\n## New Code\n```python\nif protocol.connection and protocol.connection.ip:\n    if protocol.connection.ip.port:\n        port = protocol.connection.ip.port\n```\n\n## ProtocolDefinition Structure\n```python\nclass Connection(BaseModel):\n    rs232: RS232Settings | None = None\n    ip: IPSettings | None = None\n\nclass IPSettings(BaseModel):\n    port: int\n    timeout: float = 2.0\n```\n\n## Files to modify\n- avemu.py\n\n## Acceptance\n- Default port extracted correctly from protocol.connection.ip.port\n- Works for protocols without IP settings (falls back to DEFAULT_PORT)","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:32.904521-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:01:06.467083-08:00","closed_at":"2026-01-13T20:01:06.467085-08:00","dependencies":[{"issue_id":"avemu-71h.7","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:32.905423-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.7","depends_on_id":"avemu-71h.2","type":"blocks","created_at":"2026-01-13T19:48:04.459565-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.8","title":"Clean up handlers module after migration","description":"After EmulatorClient migration is complete, clean up the handlers module.\n\n## Files to Evaluate\n- handlers/__init__.py - Keep EmulatorHandler base class? Or remove if not needed\n- handlers/default.py - Delete completely (replaced by EmulatorClient)\n\n## Decision Points\n1. Keep handlers/__init__.py if:\n   - Want to support custom handler overrides in future\n   - format_data_into_columns() utility is still needed\n   \n2. Delete handlers/ entirely if:\n   - EmulatorClient covers all use cases\n   - No need for custom handler extension\n\n## Recommendation\nKeep handlers/__init__.py with just the utility functions (format_data_into_columns).\nDelete handlers/default.py completely.\n\n## Files to modify\n- handlers/default.py (delete)\n- handlers/__init__.py (simplify)\n\n## Acceptance\n- No dead code remains\n- Utility functions preserved if still used\n- Tests still pass","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:34.028734-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:14:26.424083-08:00","closed_at":"2026-01-13T20:14:26.424083-08:00","close_reason":"Completed during pyavcontrol 1.0 migration","dependencies":[{"issue_id":"avemu-71h.8","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:34.029413-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.8","depends_on_id":"avemu-71h.4","type":"blocks","created_at":"2026-01-13T19:48:13.820392-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-71h.9","title":"Update Dockerfile for pyavcontrol 2.0","description":"Update Dockerfile to work with pyavcontrol 2.0 dependencies.\n\n## Current Dockerfile\n```dockerfile\nFROM python:3.13-rc-slim\nARG MODEL=mcintosh_mx160\n# ... installs from requirements.txt\n```\n\n## Changes Needed\n1. Ensure pyavcontrol 2.0 can be installed in container\n2. Update MODEL ARG default format if needed\n3. Test container builds successfully\n4. Verify emulation works in container\n\n## Files to modify\n- Dockerfile\n\n## Acceptance\n- Docker build succeeds\n- Container runs with pyavcontrol 2.0\n- Emulation works in containerized environment","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T19:46:35.625318-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T20:14:45.291856-08:00","closed_at":"2026-01-13T20:14:45.291856-08:00","close_reason":"Fixed handlers/ reference removal","dependencies":[{"issue_id":"avemu-71h.9","depends_on_id":"avemu-71h","type":"parent-child","created_at":"2026-01-13T19:46:35.625938-08:00","created_by":"Ryan Snodgrass"},{"issue_id":"avemu-71h.9","depends_on_id":"avemu-71h.1","type":"blocks","created_at":"2026-01-13T19:48:15.380981-08:00","created_by":"Ryan Snodgrass"}]}
{"id":"avemu-eer","title":"Zone query response resolution for flat commands","status":"closed","priority":2,"issue_type":"bug","owner":"rsnodgrass@gmail.com","created_at":"2026-02-09T00:13:21.208321-08:00","created_by":"Ryan","updated_at":"2026-02-09T00:18:01.229792-08:00","closed_at":"2026-02-09T00:18:01.229792-08:00","close_reason":"Closed"}
{"id":"avemu-eh3","title":"Filter out binary and authenticated protocols from device list","description":"Update avemu to use `is_simple_protocol()` filter from pyavcontrol.\n\n**Change in device listing:**\n```python\n# Only list devices compatible with text-based emulation\nprotocols = [p for p in library.list_protocols() \n             if library.load(p).is_simple_protocol()]\n```\n\n**Applies to both RS232 and IP emulation.**\n\n**Result:**\n- Binary protocols (26 JVC, Arcam, etc.) excluded from --list\n- Authenticated protocols (Sony ADCP) excluded\n- Warning if user manually specifies incompatible protocol\n\n**Depends on:** pyavcontrol adding `is_simple_protocol()` method","status":"closed","priority":2,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-02-01T18:13:46.14289-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-02-01T18:47:30.437561-08:00","closed_at":"2026-02-01T18:47:30.437561-08:00","close_reason":"Added is_simple_protocol() filtering to list and warning on load"}
{"id":"avemu-hk9","title":"Embedded EOL in command templates breaks matching","status":"closed","priority":2,"issue_type":"bug","owner":"rsnodgrass@gmail.com","created_at":"2026-02-09T00:13:20.138657-08:00","created_by":"Ryan","updated_at":"2026-02-09T00:18:01.210619-08:00","closed_at":"2026-02-09T00:18:01.210619-08:00","close_reason":"Closed"}
{"id":"avemu-j96","title":"Add VHS demo tape showing avemu in action","description":"Create an animated demo using charmbracelet/vhs (https://github.com/charmbracelet/vhs) that shows avemu in action.\n\n## What to create:\n1. A VHS tape file (.tape) with commands that demonstrate avemu\n2. A test script that sends commands to the emulator (power on/off, volume changes, queries)\n3. The generated GIF to embed in README.md\n\n## Demo should show:\n- Starting avemu with --model mcintosh/mx160 --tui\n- A separate terminal connecting via nc localhost 84\n- Sending various commands and receiving responses\n- State changes visible in the TUI\n\n## Files to create:\n- demo/avemu.tape - VHS tape definition\n- demo/test_client.sh - Script that sends commands to emulator\n- demo/avemu-demo.gif - Generated demo (add to .gitignore if large)","status":"closed","priority":3,"issue_type":"task","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T20:11:18.494963-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T21:09:21.807049-08:00","closed_at":"2026-01-13T21:09:21.807049-08:00","close_reason":"Created VHS demo tape and animated GIF, added to README"}
{"id":"avemu-u9c","title":"test_response_ends_with_protocol_eol fails for IGNORED/TIMEOUT framing","status":"closed","priority":3,"issue_type":"bug","owner":"rsnodgrass@gmail.com","created_at":"2026-02-09T00:13:23.983812-08:00","created_by":"Ryan","updated_at":"2026-02-09T00:18:01.262597-08:00","closed_at":"2026-02-09T00:18:01.262597-08:00","close_reason":"Closed"}
{"id":"avemu-vta","title":"Bool state values not encoded as 0/1 in int-typed responses","status":"closed","priority":2,"issue_type":"bug","owner":"rsnodgrass@gmail.com","created_at":"2026-02-09T00:13:22.885599-08:00","created_by":"Ryan","updated_at":"2026-02-09T00:18:01.247035-08:00","closed_at":"2026-02-09T00:18:01.247035-08:00","close_reason":"Closed"}
{"id":"avemu-wlj","title":"Fix schema/emulator response generation","description":"Commands are being identified but responses aren't generated correctly. Issues:\n\n1. Response generation in EmulatorClient._generate_response() needs to work with CommandGroup.actions structure\n2. ResponseParser.generate() expects specific action names (query, get) but receives 'default'\n3. DeviceState.has() method doesn't exist\n4. Some YAML fields (response.fields as strings) don't match schema expectations\n\nFiles to fix:\n- pyavcontrol/client.py - EmulatorClient response generation\n- pyavcontrol/responses.py - ResponseParser.generate()\n- pyavcontrol/schema.py - Response.fields type flexibility","status":"closed","priority":1,"issue_type":"bug","owner":"rsnodgrass@gmail.com","created_at":"2026-01-13T20:46:55.587645-08:00","created_by":"Ryan Snodgrass","updated_at":"2026-01-13T21:01:10.243179-08:00","closed_at":"2026-01-13T21:01:10.243179-08:00","close_reason":"Fixed schema/emulator response generation - all legacy format conversions working"}
